{% extends "profile_admin.html" %}

{% block title %}
    Assign CVE
{% endblock %}

{% block main %}
<div class="home-section">
<div class="assign">
  <form action="/Assign"  method="post">
  <h2>{{ list }}</h2>
<i id="description">{{ description }}</i>
  <div>

  <label for="account_type">Vendor
  <div class="control">
  {{ form_2.csrf_token }}
  {{ form_2.vendor }} </label></div>


<p></p>

  <label for="account_type">Model
  <div class="control">
    {{ form_2.model }}</label></div>
    <input name="model" type="hidden" value={{ form_2.model }} </input>
  <p></p>



  <label for="Engineer">Assign To</label>
  <div class="control">
  {{ form_2.engineer }}</div>

  <p></p>

  <label for="Due_date">Due Date</label>
  <div class="control">
  <input class="date" type="date" value="2022-01-01" id="ddate" name="ddate"></div>

<div class="sub">
  <input name="list" type="hidden" value="{{ list }}"></input>
  <input name="description" type="hidden" value="{{ description }}"></input>

  <input type="submit" value="Submit"> </input>
</div>


<p></p>
{% if error1 %}
<p class=error><strong>Error:</strong> {{ error1 }}
{% endif %}
{% if error2 %}
 <p class=error><strong>Message:</strong> {{ error2 }}
{% endif %}
</div></div></form>
<script>
let vendor = document.getElementById('vendor');
let model_select = document.getElementById('model');
document.getElementById("description").style.display = "none";
var eventList = ["window","load", "input"];
for(event of eventList) {
vendor.addEventListener(event, async function() {

input = vendor.value;
console.log(input);
await fetch('/model/' + input).then(function(response) {
response.json().then(function(data)
{
  console.log(data);
let optionHTML='';
for (let model of data.models){
    optionHTML += `<option value="${model.Model}">` + model.Model + '</option>'; }
    model_select.innerHTML = optionHTML;
    console.log(optionHTML);
     });});})}



window.onload = function() {
input = vendor.value;
console.log(input);
fetch('/model/' + input).then(function(response) {
response.json().then(function(data)
{
  console.log(data);
let optionHTML='';
for (let model of data.models){
    optionHTML += `<option value="${model.Model}">` + model.Model + '</option>'; }
    model_select.innerHTML = optionHTML;
    console.log(optionHTML);
     });});}


</script>

      {% endblock %}


